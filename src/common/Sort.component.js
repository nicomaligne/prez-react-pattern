import React from 'react';
import PropTypes from 'prop-types';

import './Sort.scss';

export default function Sort(props) {
  const { onChange, options, value = options[0] } = props;
  const { sortBy, desc } = value;

  const orderLabel = desc ? 'descending' : 'ascending';
  const nextSortBy = options[(options.indexOf(sortBy) + 1) % options.length];

  return (
    <div className="sort">
      Sort By:
      <button
        aria-label={`Sort by ${nextSortBy}. Current: ${sortBy}`}
        className="sortBy"
        onClick={() => onChange({ ...value, sortBy: nextSortBy })}
        title={`Sort by ${nextSortBy}`}
      >
        {sortBy}
      </button>
      <button
        aria-label={`Toggle sort order. Current order: ${orderLabel}`}
        className="order"
        onClick={() => onChange({ sortBy, desc: !desc })}
        title="Toggle sort order"
      >
        {desc ? (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 16">
            <g>
              <path
                d="M12.7426963,3 L7.25732795,3 C7.11444198,3 6.99940666,3.13432099 6.99940666,3.30024691 L6.99940666,4.70074074 C6.99940666,4.86567901 7.11444198,5 7.25732795,5 L12.7426963,5 C12.8843713,5 12.9994067,4.86567901 12.9994067,4.70074074 L12.9994067,3.30024691 C12.9994067,3.13432099 12.8843713,3 12.7426963,3 M14.759791,0 L7.23902237,0 C7.10678163,0 6.99940666,0.135308642 6.99940666,0.301234568 L6.99940666,1.70074074 C6.99940666,1.86666667 7.10678163,2 7.23902237,2 L14.759791,2 C14.8920317,2 14.9994067,1.86666667 14.9994067,1.70074074 L14.9994067,0.301234568 C14.9994067,0.135308642 14.8920317,0 14.759791,0 M9.77475106,6 C9.89873552,6 9.99940666,6.13432099 9.99940666,6.30024691 L9.99940666,7.70074074 C9.99940666,7.86666667 9.89873552,8 9.77475106,8 L7.22406226,8 C7.1000778,8 6.99940666,7.86666667 6.99940666,7.70074074 L6.99940666,6.30024691 C6.99940666,6.13432099 7.1000778,6 7.22406226,6 L9.77475106,6 Z M5.61858193,12.239 C5.84258193,12.239 5.97058193,12.518 5.83558193,12.714 L3.66258193,15.882 C3.55458193,16.04 3.33658193,16.04 3.22758193,15.882 L1.05458193,12.714 C0.920581934,12.518 1.04858193,12.239 1.27258193,12.239 L2.53958193,12.239 L2.53958193,0.297 C2.53958193,0.133 2.66158193,0 2.81158193,0 L4.07958193,0 C4.22958193,0 4.35058193,0.133 4.35058193,0.297 L4.35058193,12.239 L5.61858193,12.239 Z"
                transform="translate(-1)"
              />
            </g>
          </svg>
        ) : (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 16">
            <g>
              <path
                d="M12.7426963,11 L7.25732795,11 C7.11444198,11 6.99940666,11.134321 6.99940666,11.3002469 L6.99940666,12.7007407 C6.99940666,12.865679 7.11444198,13 7.25732795,13 L12.7426963,13 C12.8843713,13 12.9994067,12.865679 12.9994067,12.7007407 L12.9994067,11.3002469 C12.9994067,11.134321 12.8843713,11 12.7426963,11 M14.759791,8 L7.23902237,8 C7.10678163,8 6.99940666,8.13530864 6.99940666,8.30123457 L6.99940666,9.70074074 C6.99940666,9.86666667 7.10678163,10 7.23902237,10 L14.759791,10 C14.8920317,10 14.9994067,9.86666667 14.9994067,9.70074074 L14.9994067,8.30123457 C14.9994067,8.13530864 14.8920317,8 14.759791,8 M9.77475106,14 C9.89873552,14 9.99940666,14.134321 9.99940666,14.3002469 L9.99940666,15.7007407 C9.99940666,15.8666667 9.89873552,16 9.77475106,16 L7.22406226,16 C7.1000778,16 6.99940666,15.8666667 6.99940666,15.7007407 L6.99940666,14.3002469 C6.99940666,14.134321 7.1000778,14 7.22406226,14 L9.77475106,14 Z M5.61858193,3.7615 L4.35058193,3.7615 L4.35058193,15.7035 C4.35058193,15.8675 4.22958193,16.0005 4.07958193,16.0005 L2.81158193,16.0005 C2.66158193,16.0005 2.53958193,15.8675 2.53958193,15.7035 L2.53958193,3.7615 L1.27258193,3.7615 C1.04858193,3.7615 0.920581934,3.4825 1.05458193,3.2865 L3.22758193,0.1185 C3.33658193,-0.0395 3.55458193,-0.0395 3.66258193,0.1185 L5.83558193,3.2865 C5.97058193,3.4825 5.84258193,3.7615 5.61858193,3.7615 Z"
                transform="translate(-1)"
              />
            </g>
          </svg>
        )}
      </button>
    </div>
  );
}

Sort.propTypes = {
  onChange: PropTypes.func,
  options: PropTypes.arrayOf(PropTypes.string).isRequired,
  value: {
    sortBy: PropTypes.string,
    desc: PropTypes.bool
  }
};
